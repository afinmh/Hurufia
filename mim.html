<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mim Mati - Hurufia</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/hukum.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <a href="materi.html" class="back-button">
        <i class="fas fa-arrow-left"></i>
        Kembali
    </a>

    <header class="materi-detail-header">
        <div class="container">
            <div class="materi-title">
                <span class="arabic-letter">م</span>
                <h1>Mim Mati</h1>
            </div>
            <p class="subtitle">Pelajari hukum bacaan mim mati secara bertahap</p>
        </div>
    </header>

    <section class="materi-content">
        <div class="container">
            <div class="step-navigation">
                <div class="step-indicator">
                    <div class="step active" data-step="1">Idgham Mimi</div>
                    <div class="step" data-step="2">Ikhfa Syafawi</div>
                    <div class="step" data-step="3">Idzhar Syafawi</div>
                    <div class="step" data-step="4">Tes Pemahaman</div>
                </div>
            </div>

            <div class="content-section active" id="step-1">
                <h2>Idgham Mimi</h2>
                <div class="hukum-content">
                    <div class="hukum-info">
                        <h3>Pengertian</h3>
                        <p>Idgham Mimi adalah hukum bacaan ketika mim mati (مْ) bertemu dengan huruf mim (م).</p>
                    </div>
                    <div class="hukum-info">
                        <h3>Cara Membaca</h3>
                        <p>Mim mati dimasukkan ke huruf mim berikutnya dengan dengung.</p>
                    </div>
                    <div class="arabic-example">
                        <h3>Contoh Bacaan</h3>
                        <p>هُمْ مَنْ</p>
                        <p>عَلَيْهِمْ مَغْفِرَةٌ</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="next-button" onclick="nextStep(1)">Selanjutnya <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <div class="content-section" id="step-2">
                <h2>Ikhfa Syafawi</h2>
                <div class="hukum-content">
                    <div class="hukum-info">
                        <h3>Pengertian</h3>
                        <p>Ikhfa Syafawi adalah hukum bacaan ketika mim mati (مْ) bertemu dengan huruf ba (ب).</p>
                    </div>
                    <div class="hukum-info">
                        <h3>Cara Membaca</h3>
                        <p>Mim mati dibaca samar-samar dengan dengung ketika bertemu ba.</p>
                    </div>
                    <div class="arabic-example">
                        <h3>Contoh Bacaan</h3>
                        <p>تَرْمِيهِمْ بِحِجَارَةٍ</p>
                        <p>وَهُمْ بِالْآخِرَةِ</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="prev-button" onclick="prevStep(2)"><i class="fas fa-arrow-left"></i> Sebelumnya</button>
                    <button class="next-button" onclick="nextStep(2)">Selanjutnya <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <div class="content-section" id="step-3">
                <h2>Idzhar Syafawi</h2>
                <div class="hukum-content">
                    <div class="hukum-info">
                        <h3>Pengertian</h3>
                        <p>Idzhar Syafawi adalah hukum bacaan ketika mim mati (مْ) bertemu dengan semua huruf hijaiyah kecuali mim (م) dan ba (ب).</p>
                    </div>
                    <div class="hukum-info">
                        <h3>Cara Membaca</h3>
                        <p>Mim mati dibaca dengan jelas tanpa dengung.</p>
                    </div>
                    <div class="arabic-example">
                        <h3>Contoh Bacaan</h3>
                        <p>عَلَيْهِمْ قَوْلاً</p>
                        <p>لَهُمْ دِينُهُمْ</p>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="prev-button" onclick="prevStep(3)"><i class="fas fa-arrow-left"></i> Sebelumnya</button>
                    <button class="next-button" onclick="nextStep(3)">Selanjutnya <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>

            <div class="content-section" id="step-4">
                <h2>Tes Pemahaman</h2>
                <div class="hukum-content">
                    <div class="hukum-info">
                        <h3>Selamat!</h3>
                        <p>Anda telah menyelesaikan semua materi tentang Mim Mati. Mari kita uji pemahaman Anda dengan beberapa pertanyaan.</p>
                    </div>
                    
                    <div class="test-container">
                        <div class="test-question">
                            <h3>Pertanyaan 1</h3>
                            <p>Bagaimana cara membaca mim mati (مْ) ketika bertemu dengan huruf mim (م)?</p>
                            <div class="test-options">
                                <label>
                                    <input type="radio" name="q1" value="a">
                                    Dibaca dengan jelas tanpa dengung
                                </label>
                                <label>
                                    <input type="radio" name="q1" value="b">
                                    Dibaca samar-samar dengan dengung
                                </label>
                                <label>
                                    <input type="radio" name="q1" value="c">
                                    Dimasukkan ke huruf mim dengan dengung
                                </label>
                            </div>
                        </div>

                        <div class="test-question">
                            <h3>Pertanyaan 2</h3>
                            <p>Ketika mim mati (مْ) bertemu dengan huruf ba (ب), hukum bacaannya adalah...</p>
                            <div class="test-options">
                                <label>
                                    <input type="radio" name="q2" value="a">
                                    Idgham Mimi
                                </label>
                                <label>
                                    <input type="radio" name="q2" value="b">
                                    Ikhfa Syafawi
                                </label>
                                <label>
                                    <input type="radio" name="q2" value="c">
                                    Idzhar Syafawi
                                </label>
                            </div>
                        </div>

                        <div class="test-question">
                            <h3>Pertanyaan 3</h3>
                            <p>Contoh bacaan yang termasuk hukum Idzhar Syafawi adalah...</p>
                            <div class="test-options">
                                <label>
                                    <input type="radio" name="q3" value="a">
                                    هُمْ مَنْ
                                </label>
                                <label>
                                    <input type="radio" name="q3" value="b">
                                    تَرْمِيهِمْ بِحِجَارَةٍ
                                </label>
                                <label>
                                    <input type="radio" name="q3" value="c">
                                    عَلَيْهِمْ قَوْلاً
                                </label>
                            </div>
                        </div>

                        <div class="test-question">
                            <h3>Pertanyaan 4</h3>
                            <p>Huruf-huruf yang termasuk dalam hukum Idzhar Syafawi adalah...</p>
                            <div class="test-options">
                                <label>
                                    <input type="radio" name="q4" value="a">
                                    Semua huruf hijaiyah
                                </label>
                                <label>
                                    <input type="radio" name="q4" value="b">
                                    Semua huruf hijaiyah kecuali mim dan ba
                                </label>
                                <label>
                                    <input type="radio" name="q4" value="c">
                                    Hanya huruf mim dan ba
                                </label>
                            </div>
                        </div>

                        <div class="test-question">
                            <h3>Pertanyaan 5</h3>
                            <p>Bagaimana cara membaca mim mati (مْ) ketika bertemu dengan huruf selain mim dan ba?</p>
                            <div class="test-options">
                                <label>
                                    <input type="radio" name="q5" value="a">
                                    Dibaca dengan dengung
                                </label>
                                <label>
                                    <input type="radio" name="q5" value="b">
                                    Dibaca samar-samar
                                </label>
                                <label>
                                    <input type="radio" name="q5" value="c">
                                    Dibaca dengan jelas tanpa dengung
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="test-result" style="display: none;">
                        <h3>Hasil Tes</h3>
                        <p>Skor Anda: <span id="score">0</span>/5</p>
                        <div class="result-message"></div>
                    </div>
                </div>
                <div class="navigation-buttons">
                    <button class="prev-button" onclick="prevStep(4)"><i class="fas fa-arrow-left"></i> Sebelumnya</button>
                    <button class="check-button" onclick="checkAnswers()">Periksa Jawaban</button>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-main">
                    <div class="footer-brand">
                        <a href="index.html" class="logo">
                            <i class="fas fa-book-quran"></i>
                            Hurufia
                        </a>
                        <p>Platform pembelajaran tajwid online terbaik untuk meningkatkan kualitas bacaan Al-Qur'an Anda.</p>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2024 Hurufia. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <style>
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-icon {
            font-size: 3rem;
            color: #3498db;
            margin-bottom: 1rem;
        }

        .modal-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .modal-message {
            color: #4a5568;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .modal-button {
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-confirm {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
        }

        .modal-cancel {
            background: #f7fafc;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }

        .modal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .test-options label {
            position: relative;
            padding-right: 2rem;
        }

        .answer-feedback {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .correct {
            color: #2ecc71;
        }

        .incorrect {
            color: #e74c3c;
        }

        .test-question {
            position: relative;
        }

        .question-feedback {
            margin-top: 0.5rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
        }

        .question-feedback.correct {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }

        .question-feedback.incorrect {
            background: rgba(231, 76, 60, 0.1);
            color: #c0392b;
        }
    </style>

    <div class="modal-overlay" id="confirmModal">
        <div class="modal">
            <i class="fas fa-question-circle modal-icon"></i>
            <h3 class="modal-title">Konfirmasi</h3>
            <p class="modal-message">Apakah Anda yakin ingin melanjutkan ke Tes Pemahaman? Pastikan Anda telah memahami semua materi sebelumnya.</p>
            <div class="modal-buttons">
                <button class="modal-button modal-cancel" onclick="closeModal()">Kembali</button>
                <button class="modal-button modal-confirm" onclick="confirmTest()">Lanjutkan</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="answerModal">
        <div class="modal">
            <i class="fas fa-exclamation-circle modal-icon"></i>
            <h3 class="modal-title">Perhatian</h3>
            <p class="modal-message">Silakan jawab semua pertanyaan terlebih dahulu!</p>
            <div class="modal-buttons">
                <button class="modal-button modal-confirm" onclick="closeModal()">Baik</button>
            </div>
        </div>
    </div>

    <script>
        function showStep(stepNumber) {
            // Hide all steps
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected step
            document.getElementById(`step-${stepNumber}`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
                if (parseInt(step.dataset.step) === stepNumber) {
                    step.classList.add('active');
                }
            });

            // Scroll to top
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function nextStep(currentStep) {
            if (currentStep < 4) {
                if (currentStep === 3) {
                    showModal('confirmModal');
                } else {
                    document.querySelector(`.step[data-step="${currentStep}"]`).classList.add('completed');
                    showStep(currentStep + 1);
                }
            }
        }

        function prevStep(currentStep) {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal() {
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        function confirmTest() {
            document.querySelector(`.step[data-step="3"]`).classList.add('completed');
            showStep(4);
            closeModal();
        }

        function checkAnswers() {
            const answers = {
                q1: 'c', // Idgham Mimi - Dimasukkan ke huruf mim dengan dengung
                q2: 'b', // Ikhfa Syafawi - Dibaca samar-samar dengan dengung
                q3: 'c', // Idzhar Syafawi - Dibaca dengan jelas tanpa dengung
                q4: 'b', // Idzhar Syafawi - Semua huruf hijaiyah kecuali mim dan ba
                q5: 'c'  // Idzhar Syafawi - Dibaca dengan jelas tanpa dengung
            };

            let score = 0;
            let allAnswered = true;

            // Reset previous feedback
            document.querySelectorAll('.answer-feedback').forEach(feedback => feedback.remove());
            document.querySelectorAll('.question-feedback').forEach(feedback => feedback.remove());

            // Check each question
            for (let i = 1; i <= 5; i++) {
                const selectedAnswer = document.querySelector(`input[name="q${i}"]:checked`);
                if (!selectedAnswer) {
                    allAnswered = false;
                    break;
                }

                const questionDiv = document.querySelector(`.test-question:nth-child(${i})`);
                const labels = questionDiv.querySelectorAll('label');
                
                // Add feedback icons to each option
                labels.forEach(label => {
                    const feedback = document.createElement('span');
                    feedback.className = 'answer-feedback';
                    const input = label.querySelector('input');
                    
                    if (input.value === answers[`q${i}`]) {
                        feedback.innerHTML = '<i class="fas fa-check"></i>';
                        feedback.classList.add('correct');
                        feedback.title = 'Jawaban Benar';
                    } else if (input.checked) {
                        feedback.innerHTML = '<i class="fas fa-times"></i>';
                        feedback.classList.add('incorrect');
                        feedback.title = 'Jawaban Salah';
                    }
                    label.appendChild(feedback);
                });

                // Add question feedback
                const questionFeedback = document.createElement('div');
                questionFeedback.className = 'question-feedback';
                if (selectedAnswer.value === answers[`q${i}`]) {
                    score++;
                    questionFeedback.classList.add('correct');
                    questionFeedback.innerHTML = `
                        <i class="fas fa-check-circle"></i> 
                        <strong>Jawaban Anda benar!</strong>
                        <p>${getExplanation(i)}</p>
                    `;
                } else {
                    questionFeedback.classList.add('incorrect');
                    questionFeedback.innerHTML = `
                        <i class="fas fa-times-circle"></i> 
                        <strong>Jawaban Anda kurang tepat.</strong>
                        <p>${getExplanation(i)}</p>
                    `;
                }
                questionDiv.appendChild(questionFeedback);

                // Disable all inputs after checking
                labels.forEach(label => {
                    label.querySelector('input').disabled = true;
                });
            }

            if (!allAnswered) {
                showModal('answerModal');
                return;
            }

            // Show result
            const resultDiv = document.querySelector('.test-result');
            const scoreSpan = document.getElementById('score');
            const messageDiv = document.querySelector('.result-message');
            const checkButton = document.querySelector('.check-button');

            resultDiv.style.display = 'block';
            scoreSpan.textContent = score;

            if (score >= 3) {
                messageDiv.innerHTML = '<p>Selamat! Anda telah memahami materi Mim Mati dengan baik.</p>';
                checkButton.textContent = 'Selesai';
                checkButton.classList.remove('check-button');
                checkButton.classList.add('finish-button');
                checkButton.onclick = function() {
                    window.location.href = 'materi.html';
                };
            } else {
                messageDiv.innerHTML = '<p>Anda perlu mempelajari kembali materi Mim Mati. Jangan menyerah!</p>';
                checkButton.textContent = 'Ulangi';
                checkButton.classList.remove('check-button');
                checkButton.classList.add('retry-button');
                checkButton.onclick = function() {
                    // Reset all radio buttons and feedback
                    document.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.checked = false;
                        radio.disabled = false;
                    });
                    document.querySelectorAll('.answer-feedback').forEach(feedback => feedback.remove());
                    document.querySelectorAll('.question-feedback').forEach(feedback => feedback.remove());
                    // Hide result
                    resultDiv.style.display = 'none';
                    // Reset button
                    checkButton.textContent = 'Periksa Jawaban';
                    checkButton.classList.remove('retry-button');
                    checkButton.classList.add('check-button');
                    checkButton.onclick = checkAnswers;
                };
            }

            // Scroll to result
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function getExplanation(questionNumber) {
            const explanations = {
                1: "Ketika mim mati bertemu dengan huruf mim, hukumnya adalah Idgham Mimi. Mim mati dimasukkan ke huruf mim berikutnya dengan dengung.",
                2: "Ketika mim mati bertemu dengan huruf ba, hukumnya adalah Ikhfa Syafawi. Mim mati dibaca samar-samar dengan dengung.",
                3: "Contoh bacaan 'عَلَيْهِمْ قَوْلاً' termasuk dalam hukum Idzhar Syafawi karena mim mati bertemu dengan huruf qaf. Mim mati dibaca dengan jelas tanpa dengung.",
                4: "Hukum Idzhar Syafawi berlaku ketika mim mati bertemu dengan semua huruf hijaiyah kecuali mim dan ba.",
                5: "Ketika mim mati bertemu dengan huruf selain mim dan ba, hukumnya adalah Idzhar Syafawi. Mim mati dibaca dengan jelas tanpa dengung."
            };
            return explanations[questionNumber] || '';
        }

        // Close modal when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
        });

        // Initialize first step
        showStep(1);
    </script>
</body>
</html> 